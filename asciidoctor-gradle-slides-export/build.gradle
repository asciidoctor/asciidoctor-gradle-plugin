generateModuleVersions {
    basename = 'slides2pdf'
    propertyNames ~/^deck2pdf$/
}

configurations {
    additionalPluginClasspath
}

dependencies {
    //compileOnly "me.champeau.deck2pdf:deck2pdf:${moduleVersions.deck2pdf}"
    compile project(':asciidoctor-gradle-base')
    additionalPluginClasspath project(':asciidoctor-gradle-jvm-slides')
    intTestOfflineRepo "me.champeau.deck2pdf:deck2pdf:${moduleVersions.deck2pdf}"
}

intTest {
    enabled = !gradle.startParameter.isOffline()
    systemProperties TEST_PROJECTS_DIR: file('src/intTest/projects')
}

pluginUnderTestMetadata {
    pluginClasspath.from configurations.additionalPluginClasspath
}

configurePlugin 'org.asciidoctor.deck2pdf',
    'Converts HTML slides generated by Asciidoctor to PDF/PNG/JPG',
    'Any slide deck generated by supported Asciidoctor slide task types can be converted to PDF, JPG or PNG',
    ['asciidoctorj', 'reveal.js', 'slides', 'pdf', 'jpg', 'png']

